(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{12758:function(e,s,t){Promise.resolve().then(t.bind(t,60878))},60878:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(57437),r=t(2265),n=t(99376),l=t(27648),i=t(53417),c=t(41671),o=t(49322),d=t(66337),m=t(87769),x=t(42208),u=t(56426),h=t(66070);function f(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)().get("token"),[t,f]=(0,r.useState)({password:"",confirmPassword:""}),[p,g]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!0),[k,z]=(0,r.useState)(""),[Z,C]=(0,r.useState)(!1),[S,P]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{if(!s){z("Token no v\xe1lido"),N(!1);return}try{let e=await fetch("".concat("http://localhost:3005","/api/auth/reset-password/").concat(s)),t=await e.json();t.success?P(t.email):z(t.error||"Token inv\xe1lido o expirado")}catch(e){z("Error verificando token")}finally{N(!1)}})()},[s]);let R=async a=>{if(a.preventDefault(),z(""),t.password!==t.confirmPassword){z("Las contrase\xf1as no coinciden");return}if(t.password.length<6){z("La contrase\xf1a debe tener al menos 6 caracteres");return}w(!0);try{let a=await fetch("".concat("http://localhost:3005","/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,password:t.password})}),r=await a.json();r.success?(C(!0),setTimeout(()=>{e.push("/login")},3e3)):z(r.error||"Error al cambiar contrase\xf1a")}catch(e){z("Error de conexi\xf3n. Por favor intente nuevamente.")}finally{w(!1)}};return v?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"max-w-md w-full",children:(0,a.jsx)(h.Zb,{className:"bg-white shadow-xl",padding:"lg",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Verificando token..."})]})})})}):Z?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"text-white",size:32})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"SafeNotify"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Contrase\xf1a actualizada"})]}),(0,a.jsx)(h.Zb,{className:"bg-white shadow-xl",padding:"lg",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(c.Z,{className:"mx-auto text-green-500",size:64}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\xa1Contrase\xf1a actualizada!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Tu contrase\xf1a ha sido actualizada exitosamente."}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Ser\xe1s redirigido al login en unos segundos..."}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)(l.default,{href:"/login",children:(0,a.jsx)(u.z,{size:"lg",className:"w-full gradient-primary",children:"Ir al login"})})})]})})]})}):k&&!s?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"max-w-md w-full",children:(0,a.jsx)(h.Zb,{className:"bg-white shadow-xl",padding:"lg",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(o.Z,{className:"mx-auto text-red-500",size:64}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Error"}),(0,a.jsx)("p",{className:"text-gray-600",children:k}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)(l.default,{href:"/forgot-password",children:(0,a.jsx)(u.z,{size:"lg",variant:"outline",className:"w-full",children:"Solicitar nuevo enlace"})})})]})})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"text-white",size:32})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"SafeNotify"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Nueva contrase\xf1a"})]}),(0,a.jsx)(h.Zb,{className:"bg-white shadow-xl",padding:"lg",children:(0,a.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[k&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start space-x-2",children:[(0,a.jsx)(o.Z,{size:20,className:"flex-shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm",children:k})]}),(0,a.jsxs)("div",{className:"text-center space-y-2 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Crear nueva contrase\xf1a"}),S&&(0,a.jsxs)("p",{className:"text-gray-600 text-sm",children:["Para: ",(0,a.jsx)("span",{className:"font-medium",children:S})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:p?"text":"password",value:t.password,onChange:e=>f({...t,password:e.target.value}),className:"w-full px-4 py-3 pl-11 pr-11 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-gray-900",placeholder:"••••••••",required:!0,minLength:6}),(0,a.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,a.jsx)("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:p?(0,a.jsx)(m.Z,{size:20}):(0,a.jsx)(x.Z,{size:20})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:y?"text":"password",value:t.confirmPassword,onChange:e=>f({...t,confirmPassword:e.target.value}),className:"w-full px-4 py-3 pl-11 pr-11 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-gray-900",placeholder:"••••••••",required:!0,minLength:6}),(0,a.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,a.jsx)("button",{type:"button",onClick:()=>j(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:y?(0,a.jsx)(m.Z,{size:20}):(0,a.jsx)(x.Z,{size:20})})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsx)("p",{children:"La contrase\xf1a debe tener:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,a.jsx)("li",{className:t.password.length>=6?"text-green-600":"",children:"Al menos 6 caracteres"}),(0,a.jsx)("li",{className:t.password===t.confirmPassword&&t.password?"text-green-600":"",children:"Las contrase\xf1as deben coincidir"})]})]}),(0,a.jsx)(u.z,{type:"submit",size:"lg",className:"w-full gradient-primary",disabled:b||t.password!==t.confirmPassword||t.password.length<6,children:b?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Actualizando..."]}):(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"mr-2",size:20}),"Actualizar contrase\xf1a"]})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(l.default,{href:"/login",className:"text-sm text-purple-600 hover:text-purple-700",children:"Volver al login"})})]})})]})})}function p(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"max-w-md w-full",children:(0,a.jsx)(h.Zb,{className:"bg-white shadow-xl",padding:"lg",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Cargando..."})]})})})}),children:(0,a.jsx)(f,{})})}},56426:function(e,s,t){"use strict";t.d(s,{z:function(){return d}});var a=t(57437),r=t(2265),n=t(90535),l=t(94508);let i={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};function c(e){let{size:s="md",className:t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("animate-spin",i[s],t),children:(0,a.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",className:"opacity-25"}),(0,a.jsx)("path",{d:"M12 2a10 10 0 0 1 10 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",className:"opacity-75"})]})})}let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98] btn-hover-lift",{variants:{variant:{primary:"bg-primary text-white hover:bg-primary-600 shadow-lg hover:shadow-xl active:shadow-md",secondary:"bg-secondary text-white hover:bg-secondary-600 shadow-lg hover:shadow-xl active:shadow-md",outline:"border-2 border-primary text-primary hover:bg-primary hover:text-white shadow-md hover:shadow-lg",ghost:"text-primary hover:bg-primary/10 hover:text-primary-700",danger:"bg-danger text-white hover:bg-danger-600 shadow-lg hover:shadow-xl active:shadow-md"},size:{sm:"h-9 px-3 text-xs",md:"h-10 px-4 py-2",lg:"h-11 px-6 text-base",xl:"h-12 px-8 text-lg"}},defaultVariants:{variant:"primary",size:"md"}}),d=(0,r.forwardRef)((e,s)=>{let{className:t,variant:r,size:n,loading:i,children:d,disabled:m,...x}=e;return(0,a.jsxs)("button",{className:(0,l.cn)(o({variant:r,size:n,className:t})),ref:s,disabled:m||i,...x,children:[i&&(0,a.jsx)(c,{size:"sm",className:"mr-2"}),d]})});d.displayName="Button"},66070:function(e,s,t){"use strict";t.d(s,{Zb:function(){return c}});var a=t(57437),r=t(2265),n=t(90535),l=t(94508);let i=(0,n.j)("rounded-xl border bg-white text-gray-900 shadow-sm transition-all duration-300",{variants:{hover:{true:"card-hover cursor-pointer",false:""},padding:{none:"",sm:"p-3",md:"p-4",lg:"p-6",xl:"p-8"}},defaultVariants:{hover:!1,padding:"md"}}),c=(0,r.forwardRef)((e,s)=>{let{className:t,hover:r,padding:n,children:c,...o}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)(i({hover:r,padding:n,className:t})),...o,children:c})});c.displayName="Card",(0,r.forwardRef)((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5",t),...r})}).displayName="CardHeader",(0,r.forwardRef)((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsx)("h3",{ref:s,className:(0,l.cn)("text-xl font-semibold leading-none tracking-tight",t),...n,children:r})}).displayName="CardTitle",(0,r.forwardRef)((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-gray-600",t),...r})}).displayName="CardDescription",(0,r.forwardRef)((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("pt-0",t),...r})}).displayName="CardContent",(0,r.forwardRef)((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center pt-0",t),...r})}).displayName="CardFooter"},94508:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var a=t(61994),r=t(53335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}},49322:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},41671:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},87769:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},42208:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},66337:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},99376:function(e,s,t){"use strict";var a=t(35475);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[14,783,971,117,744],function(){return e(e.s=12758)}),_N_E=e.O()}]);