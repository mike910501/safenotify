(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{94757:function(e,s,a){Promise.resolve().then(a.bind(a,12167))},12167:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Z}});var t=a(57437),r=a(2265),l=a(99376),c=a(8530),i=a(82222),n=a(91723),o=a(41671),d=a(99388),m=a(76865),x=a(53417),h=a(99397),g=a(48736),p=a(70525),u=a(95805),b=a(42208),j=a(2207),y=a(18930),N=a(82023),f=a(56426),v=a(66070),w=a(76362);function Z(){let{user:e}=(0,w.a)(),s=(0,l.useRouter)(),[a,Z]=(0,r.useState)([]),[k,C]=(0,r.useState)(null),[z,M]=(0,r.useState)(!0),[E,A]=(0,r.useState)("all");(0,r.useEffect)(()=>{P(),S()},[]);let P=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("".concat(c.T,"/api/templates-ai"),{headers:{Authorization:"Bearer ".concat(e)}}),a=await s.json();a.success&&Z(a.templates)}catch(e){console.error("Error fetching templates:",e)}finally{M(!1)}},S=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("".concat(c.T,"/api/templates-ai/stats/user"),{headers:{Authorization:"Bearer ".concat(e)}}),a=await s.json();a.success&&C(a.stats)}catch(e){console.error("Error fetching stats:",e)}},T=async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar esta plantilla?"))try{let s=localStorage.getItem("token"),t=await fetch("".concat(c.T,"/api/templates-ai/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s)}}),r=await t.json();r.success?(Z(a.filter(s=>s.id!==e)),S()):alert(r.error||"Error eliminando plantilla")}catch(e){console.error("Error deleting template:",e),alert("Error de conexi\xf3n")}},_=e=>{switch(e.status){case"ai_pending":return{icon:i.Z,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",text:"Validaci\xf3n IA"};case"pending":return{icon:n.Z,color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",text:"Pendiente Revisi\xf3n"};case"approved":return{icon:o.Z,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",text:"Aprobada"};case"rejected":return{icon:d.Z,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",text:"Rechazada"};case"active":return{icon:o.Z,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",text:"Activa (Twilio)"};default:return{icon:m.Z,color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200",text:"Desconocido"}}},q=e=>({general:"General",marketing:"Marketing",medical:"M\xe9dica",beauty:"Belleza",service:"Servicios",promotion:"Promocional",reminder:"Recordatorios"})[e]||e,H=a.filter(e=>"all"===E||e.category===E);return z?(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,t.jsx)("div",{className:"h-48 bg-gray-200 rounded-lg"},s))})]})}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,t.jsx)(x.Z,{className:"w-8 h-8 mr-3"}),"Plantillas"]}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Crea y gestiona plantillas de WhatsApp con validaci\xf3n IA"})]}),(0,t.jsxs)(f.z,{onClick:()=>s.push("/dashboard/templates/create"),className:"bg-primary-600 hover:bg-primary-700 flex items-center",children:[(0,t.jsx)(h.Z,{size:16,className:"mr-2"}),"Nueva Plantilla"]})]}),k&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(v.Zb,{className:"bg-white",padding:"lg",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(g.Z,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:k.total})]})]})}),(0,t.jsx)(v.Zb,{className:"bg-white",padding:"lg",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,t.jsx)(o.Z,{className:"w-6 h-6 text-green-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Aprobadas"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:k.approved})]})]})}),(0,t.jsx)(v.Zb,{className:"bg-white",padding:"lg",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,t.jsx)(n.Z,{className:"w-6 h-6 text-yellow-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pendientes"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:k.pending})]})]})}),(0,t.jsx)(v.Zb,{className:"bg-white",padding:"lg",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,t.jsx)(p.Z,{className:"w-6 h-6 text-purple-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Usos Totales"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:k.totalUsage})]})]})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("button",{onClick:()=>A("all"),className:"px-3 py-1 text-sm rounded-full transition-colors ".concat("all"===E?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Todas"}),k&&Object.keys(k.categories).map(e=>(0,t.jsxs)("button",{onClick:()=>A(e),className:"px-3 py-1 text-sm rounded-full transition-colors ".concat(E===e?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[q(e)," (",k.categories[e],")"]},e))]}),H.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:H.map(e=>{let a=_(e),r=a.icon;return(0,t.jsx)(v.Zb,{className:"bg-white hover:shadow-lg transition-shadow",padding:"lg",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 line-clamp-2",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:q(e.category)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 rounded-full text-xs ".concat(a.bgColor," ").concat(a.borderColor," border"),children:[(0,t.jsx)(r,{className:"w-3 h-3 ".concat(a.color)}),(0,t.jsx)("span",{className:a.color,children:a.text})]})]}),(0,t.jsx)("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,t.jsx)("p",{className:"text-sm text-gray-700 line-clamp-3",children:e.content})}),e.variables.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.variables.map((e,s)=>(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:e},s))}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.Z,{className:"w-3 h-3 mr-1"}),e.usageCount||0," usos"]}),e.isPublic&&(0,t.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,t.jsx)(u.Z,{className:"w-3 h-3 mr-1"}),"P\xfablica"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>s.push("/dashboard/templates/".concat(e.id)),children:[(0,t.jsx)(b.Z,{size:14,className:"mr-1"}),"Ver"]}),(0,t.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>s.push("/dashboard/templates/".concat(e.id,"/edit")),children:[(0,t.jsx)(j.Z,{size:14,className:"mr-1"}),"Editar"]}),(0,t.jsx)(f.z,{variant:"outline",size:"sm",onClick:()=>T(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,t.jsx)(y.Z,{size:14})})]})]})]})},e.id)})}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(x.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"all"===E?"No tienes plantillas":"No hay plantillas en esta categor\xeda"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"all"===E?"Crea tu primera plantilla con validaci\xf3n IA":"Prueba con otra categor\xeda o crea una nueva plantilla"}),(0,t.jsxs)(f.z,{onClick:()=>s.push("/dashboard/templates/create"),className:"bg-primary-600 hover:bg-primary-700",children:[(0,t.jsx)(h.Z,{size:16,className:"mr-2"}),(0,t.jsx)(N.Z,{size:16,className:"mr-2"}),"Crear Primera Plantilla"]})]})]})}},91723:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(79205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},48736:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(79205).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},53417:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(79205).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},2207:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(79205).Z)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},70525:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(79205).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},95805:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(79205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}},function(e){e.O(0,[14,126,971,117,744],function(){return e(e.s=94757)}),_N_E=e.O()}]);