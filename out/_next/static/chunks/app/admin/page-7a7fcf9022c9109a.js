(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{4070:function(e,a,r){Promise.resolve().then(r.bind(r,8019))},8019:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return E}});var t=r(7437),s=r(2265),n=r(9376),l=r(8530),i=r(2222),o=r(1723),c=r(1671),d=r(9388),m=r(3276),x=r(6865),u=r(8906),h=r(2023),p=r(7168),g=r(8736),f=r(3247),b=r(9205);let y=(0,b.Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var v=r(3417),j=r(2369),N=r(1047),w=r(2135),k=r(875);let Z=(0,b.Z)("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),z=(0,b.Z)("thumbs-down",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);var S=r(1252),C=r(6070),A=r(3863),D=r(6362);function E(){let{user:e}=(0,D.a)(),a=(0,n.useRouter)(),[r,b]=(0,s.useState)([]),[E,M]=(0,s.useState)(null),[I,T]=(0,s.useState)(!0),[P,R]=(0,s.useState)(null),[O,q]=(0,s.useState)(null),[H,L]=(0,s.useState)(null),[Y,B]=(0,s.useState)(""),[V,J]=(0,s.useState)("all"),[_,F]=(0,s.useState)(new Date);(0,s.useEffect)(()=>{if(e&&"admin"!==e.role){a.push("/dashboard");return}},[e,a]),(0,s.useEffect)(()=>{(null==e?void 0:e.role)==="admin"&&(W(),U())},[e]),(0,s.useEffect)(()=>{(null==e?void 0:e.role)==="admin"&&W()},[V]);let W=async()=>{try{T(!0);let e=localStorage.getItem("token"),a=new URLSearchParams;"all"!==V&&a.append("status",V),Y.trim()&&a.append("search",Y.trim());let r="".concat(l.T,"/api/admin/templates").concat(a.toString()?"?"+a.toString():""),t=await fetch(r,{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();s.success&&(b(s.templates),F(new Date))}catch(e){console.error("Error fetching templates:",e)}finally{T(!1)}},U=async()=>{try{let e=localStorage.getItem("token"),a=await fetch("".concat(l.T,"/api/admin/templates/stats"),{headers:{Authorization:"Bearer ".concat(e)}}),r=await a.json();r.success&&M(r.stats)}catch(e){console.error("Error fetching stats:",e)}},G=async e=>{if(confirm("\xbfAprobar esta plantilla?")){q(e+"-approve");try{let a=localStorage.getItem("token"),r=await fetch("".concat(l.T,"/api/admin/templates/").concat(e,"/approve"),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({notes:"Aprobada desde panel admin"})}),t=await r.json();t.success?(alert("Plantilla aprobada exitosamente"),W(),U()):alert(t.error||"Error aprobando plantilla")}catch(e){console.error("Error approving template:",e),alert("Error de conexi\xf3n")}finally{q(null)}}},K=async e=>{let a=prompt("Raz\xf3n del rechazo (opcional):");if(confirm("\xbfRechazar esta plantilla?")){q(e+"-reject");try{let r=localStorage.getItem("token"),t=await fetch("".concat(l.T,"/api/admin/templates/").concat(e,"/reject"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({notes:a||"No cumple con pol\xedticas de WhatsApp"})}),s=await t.json();s.success?(alert("Plantilla rechazada"),W(),U()):alert(s.error||"Error rechazando plantilla")}catch(e){console.error("Error rejecting template:",e),alert("Error de conexi\xf3n")}finally{q(null)}}},Q=async e=>{let a=prompt("Ingresa el Template ID de Twilio/WhatsApp:");if(a){q(e+"-activate");try{let r=localStorage.getItem("token"),t=await fetch("".concat(l.T,"/api/admin/templates/").concat(e,"/activate"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({twilioTemplateId:a})}),s=await t.json();s.success?(alert("Plantilla activada exitosamente"),W(),U()):alert(s.error||"Error activando plantilla")}catch(e){console.error("Error activating template:",e),alert("Error de conexi\xf3n")}finally{q(null)}}},X=e=>{switch(e.status){case"ai_pending":return{icon:i.Z,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",text:"Validaci\xf3n IA"};case"pending":return{icon:o.Z,color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",text:"Pendiente Revisi\xf3n"};case"approved":return{icon:c.Z,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",text:"Aprobada"};case"rejected":return{icon:d.Z,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",text:"Rechazada"};case"active":return{icon:m.Z,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",text:"Activa (Twilio)"};default:return{icon:x.Z,color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200",text:"Desconocido"}}};return I?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando panel de administraci\xf3n..."})]})}):(null==e?void 0:e.role)!=="admin"?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(d.Z,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Acceso Denegado"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Necesitas permisos de administrador"})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-light-50 via-white to-primary-50/20",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500/10 to-secondary-500/10 blur-3xl -z-10"}),(0,t.jsx)(C.Zb,{className:"bg-white/90 backdrop-blur-sm border-0 shadow-xl",padding:"lg",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center space-y-4 lg:space-y-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-primary-500/20 blur-lg rounded-full"}),(0,t.jsx)(A.Y,{icon:u.Z,size:48,className:"text-primary-600 relative",animation:"pulse"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"Panel de Administraci\xf3n"}),(0,t.jsxs)("p",{className:"text-dark-500 mt-1 flex items-center space-x-2",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["Gesti\xf3n de plantillas WhatsApp • Actualizado: ",_.toLocaleTimeString()]})]})]})]}),(0,t.jsxs)(S.z,{onClick:W,className:"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",size:"lg",children:[(0,t.jsx)(p.Z,{size:16,className:"mr-2"}),"Actualizar"]})]})})]}),E&&(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:[(0,t.jsx)(C.Zb,{className:"bg-gradient-to-br from-accent-50 to-accent-100/50 border-accent-200 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1",padding:"lg",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(A.Y,{icon:o.Z,size:32,className:"text-accent-600 mx-auto mb-3",animation:"pulse"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-accent-900",children:E.pending||0}),(0,t.jsx)("p",{className:"text-accent-700 text-sm font-medium",children:"Pendientes"})]})}),(0,t.jsx)(C.Zb,{className:"bg-gradient-to-br from-primary-50 to-primary-100/50 border-primary-200 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1",padding:"lg",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(A.Y,{icon:c.Z,size:32,className:"text-primary-600 mx-auto mb-3",animation:"pulse"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-primary-900",children:E.approved||0}),(0,t.jsx)("p",{className:"text-primary-700 text-sm font-medium",children:"Aprobadas"})]})}),(0,t.jsx)(C.Zb,{className:"bg-gradient-to-br from-danger-50 to-danger-100/50 border-danger-200 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1",padding:"lg",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(A.Y,{icon:d.Z,size:32,className:"text-danger-600 mx-auto mb-3",animation:"pulse"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-danger-900",children:E.rejected||0}),(0,t.jsx)("p",{className:"text-danger-700 text-sm font-medium",children:"Rechazadas"})]})}),(0,t.jsx)(C.Zb,{className:"bg-gradient-to-br from-secondary-50 to-secondary-100/50 border-secondary-200 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1",padding:"lg",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(A.Y,{icon:m.Z,size:32,className:"text-secondary-600 mx-auto mb-3",animation:"pulse"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-secondary-900",children:E.active||0}),(0,t.jsx)("p",{className:"text-secondary-700 text-sm font-medium",children:"Activas"})]})}),(0,t.jsx)(C.Zb,{className:"bg-gradient-to-br from-dark-100 to-dark-200/50 border-dark-300 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1",padding:"lg",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(A.Y,{icon:g.Z,size:32,className:"text-dark-600 mx-auto mb-3",animation:"pulse"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-dark-900",children:E.total||0}),(0,t.jsx)("p",{className:"text-dark-700 text-sm font-medium",children:"Total"})]})}),(0,t.jsx)(C.Zb,{className:"bg-gradient-to-br from-primary-100 to-secondary-100/50 border-primary-300 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1",padding:"lg",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(A.Y,{icon:i.Z,size:32,className:"text-primary-700 mx-auto mb-3",animation:"pulse"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-primary-900",children:E.recentPending||0}),(0,t.jsx)("p",{className:"text-primary-700 text-sm font-medium",children:"Recientes"})]})})]}),(0,t.jsx)(C.Zb,{className:"bg-white/90 backdrop-blur-sm border-0 shadow-lg",padding:"lg",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),W()},className:"flex-1 flex gap-3",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500/5 to-secondary-500/5 rounded-lg"}),(0,t.jsx)(f.Z,{className:"w-5 h-5 absolute left-4 top-1/2 transform -translate-y-1/2 text-primary-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar por nombre, contenido, usuario...",value:Y,onChange:e=>B(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-transparent border-2 border-primary-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500 transition-all duration-300 text-dark-700 placeholder-dark-400"})]}),(0,t.jsxs)(S.z,{type:"submit",className:"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white px-8 py-3 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Buscar"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-dark-600",children:[(0,t.jsx)(y,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Filtrar:"})]}),(0,t.jsxs)("select",{value:V,onChange:e=>J(e.target.value),className:"px-4 py-3 bg-white border-2 border-primary-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500 transition-all duration-300 text-dark-700 font-medium min-w-[200px]",children:[(0,t.jsx)("option",{value:"all",children:"✨ Todos los estados"}),(0,t.jsx)("option",{value:"ai_pending",children:"\uD83E\uDD16 Validaci\xf3n IA"}),(0,t.jsx)("option",{value:"pending",children:"⏳ Pendientes"}),(0,t.jsx)("option",{value:"approved",children:"✅ Aprobadas"}),(0,t.jsx)("option",{value:"rejected",children:"❌ Rechazadas"}),(0,t.jsx)("option",{value:"active",children:"\uD83D\uDE80 Activas"})]})]})]})}),(0,t.jsxs)(C.Zb,{className:"bg-white/90 backdrop-blur-sm border-0 shadow-lg",padding:"lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(A.Y,{icon:v.Z,size:28,className:"text-primary-600",animation:"pulse"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:["Plantillas (",r.length,")"]}),"all"!==V&&(0,t.jsxs)("p",{className:"text-sm text-dark-500 flex items-center mt-1",children:[(0,t.jsx)(y,{className:"w-3 h-3 mr-1"}),"Filtrado por: ",(0,t.jsx)("span",{className:"font-medium ml-1",children:V})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-secondary-500 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-sm text-dark-500",children:"En vivo"})]})]}),0===r.length?(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsxs)("div",{className:"relative mb-6",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-primary-500/10 blur-2xl rounded-full"}),(0,t.jsx)(A.Y,{icon:v.Z,size:80,className:"text-primary-400 mx-auto relative",animation:"pulse"})]}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-dark-700 mb-2",children:"all"===V?"\uD83D\uDD0D No hay plantillas":"\uD83D\uDD0D No hay plantillas ".concat(V)}),(0,t.jsx)("p",{className:"text-dark-500 max-w-md mx-auto",children:"pending"===V?"⏳ Los usuarios a\xfan no han creado plantillas para revisar. \xa1Pronto aparecer\xe1n aqu\xed!":"\uD83D\uDD04 Cambia el filtro para ver otras plantillas o crea nuevas plantillas."})]}):(0,t.jsx)("div",{className:"space-y-4",children:r.map(e=>{let a=X(e),r=H===e.id;return(0,t.jsxs)("div",{className:"group bg-white border border-light-200 rounded-xl shadow-sm hover:shadow-xl transition-all duration-500 transform hover:-translate-y-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"p-6 cursor-pointer transition-all duration-300 ".concat(a.bgColor," hover:bg-opacity-80"),onClick:()=>L(r?null:e.id),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 ".concat(a.color.replace("text-","bg-").replace("-600","-500/20")," blur-md rounded-full")}),(0,t.jsx)(A.Y,{icon:a.icon,size:24,className:"".concat(a.color," relative"),animation:"pulse"})]}),(0,t.jsx)("h3",{className:"text-lg font-bold text-dark-800 group-hover:text-primary-600 transition-colors duration-300",children:e.name})]}),(0,t.jsx)("div",{className:"px-4 py-2 rounded-full text-sm font-medium ".concat(a.bgColor," ").concat(a.color," border ").concat(a.borderColor," shadow-sm"),children:a.text}),e.aiApproved&&(0,t.jsxs)("div",{className:"px-3 py-2 rounded-full text-sm font-medium bg-gradient-to-r from-secondary-100 to-secondary-50 text-secondary-800 border border-secondary-200 shadow-sm flex items-center space-x-1",children:[(0,t.jsx)(i.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["IA: ",e.aiScore,"/100"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[e.user?(0,t.jsxs)("div",{className:"text-sm text-dark-600 flex items-center space-x-1 bg-light-100 px-3 py-2 rounded-lg",children:[(0,t.jsx)(j.Z,{size:16,className:"text-primary-500"}),(0,t.jsx)("span",{className:"font-medium",children:e.user.name})]}):(0,t.jsxs)("div",{className:"text-sm text-dark-600 flex items-center space-x-1 bg-blue-100 px-3 py-2 rounded-lg",children:[(0,t.jsx)(j.Z,{size:16,className:"text-blue-500"}),(0,t.jsx)("span",{className:"font-medium",children:"\uD83C\uDFE2 Plantilla del Sistema"})]}),(0,t.jsxs)("div",{className:"text-sm text-dark-500 flex items-center space-x-1",children:[(0,t.jsx)(N.Z,{size:16,className:"text-accent-500"}),(0,t.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]}),(0,t.jsx)("div",{className:"p-2 rounded-lg hover:bg-white/50 transition-colors duration-200",children:r?(0,t.jsx)(w.Z,{size:24,className:"text-primary-600"}):(0,t.jsx)(k.Z,{size:24,className:"text-dark-400 group-hover:text-primary-600 transition-colors duration-300"})})]})]})}),r&&(0,t.jsxs)("div",{className:"border-t border-light-200 bg-gradient-to-br from-white to-light-50/50 p-8 animate-slide-down",children:[(0,t.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8 mb-8",children:[(0,t.jsxs)(C.Zb,{className:"bg-white/80 backdrop-blur-sm border-light-200 shadow-sm",padding:"lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(j.Z,{className:"w-5 h-5 text-primary-600"}),(0,t.jsx)("h4",{className:"text-lg font-bold text-dark-800",children:"Informaci\xf3n"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-light-50 rounded-lg",children:[(0,t.jsx)("span",{className:"font-medium text-dark-600",children:"Usuario:"}),(0,t.jsx)("span",{className:"text-dark-800 font-semibold",children:e.user.name})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-light-50 rounded-lg",children:[(0,t.jsx)("span",{className:"font-medium text-dark-600",children:"Email:"}),(0,t.jsx)("span",{className:"text-sm text-dark-700",children:e.user.email})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-light-50 rounded-lg",children:[(0,t.jsx)("span",{className:"font-medium text-dark-600",children:"Categor\xeda:"}),(0,t.jsx)("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 rounded text-sm font-medium",children:e.category})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-light-50 rounded-lg",children:[(0,t.jsx)("span",{className:"font-medium text-dark-600",children:"Variables:"}),(0,t.jsx)("span",{className:"text-sm text-dark-700 max-w-48 truncate",children:e.variables.length>0?e.variables.join(", "):"❌ Ninguna"})]}),(0,t.jsxs)("div",{className:"p-3 bg-light-50 rounded-lg",children:[(0,t.jsx)("span",{className:"font-medium text-dark-600 block mb-2",children:"ID:"}),(0,t.jsx)("code",{className:"bg-dark-100 px-3 py-2 rounded-md text-xs font-mono text-dark-700 block break-all",children:e.id})]}),e.twilioTemplateId&&(0,t.jsxs)("div",{className:"p-3 bg-primary-50 rounded-lg border border-primary-200",children:[(0,t.jsx)("span",{className:"font-medium text-primary-700 block mb-2",children:"Twilio ID:"}),(0,t.jsx)("code",{className:"bg-primary-100 px-3 py-2 rounded-md text-xs font-mono text-primary-800 block break-all",children:e.twilioTemplateId})]})]})]}),(0,t.jsxs)(C.Zb,{className:"bg-white/80 backdrop-blur-sm border-light-200 shadow-sm",padding:"lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(i.Z,{className:"w-5 h-5 text-secondary-600"}),(0,t.jsx)("h4",{className:"text-lg font-bold text-dark-800",children:"An\xe1lisis IA"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-light-50 rounded-lg",children:[(0,t.jsx)("span",{className:"font-medium text-dark-600",children:"Estado IA:"}),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-bold ".concat(e.aiApproved?"bg-secondary-100 text-secondary-800":"bg-danger-100 text-danger-800"),children:e.aiApproved?"✅ Aprobado":"❌ Rechazado"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-light-50 rounded-lg",children:[(0,t.jsx)("span",{className:"font-medium text-dark-600",children:"Score:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-20 bg-dark-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat((e.aiScore||0)>=80?"bg-secondary-500":(e.aiScore||0)>=60?"bg-accent-500":"bg-danger-500"),style:{width:"".concat(e.aiScore||0,"%")}})}),(0,t.jsxs)("span",{className:"font-bold text-dark-800",children:[e.aiScore||0,"/100"]})]})]}),e.aiReasons.length>0&&(0,t.jsxs)("div",{className:"p-4 bg-primary-50 rounded-lg border border-primary-200",children:[(0,t.jsxs)("h5",{className:"font-semibold text-primary-800 mb-2 flex items-center",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-1"}),"Razones:"]}),(0,t.jsx)("ul",{className:"space-y-1",children:e.aiReasons.map((e,a)=>(0,t.jsxs)("li",{className:"text-sm text-primary-700 flex items-start space-x-2",children:[(0,t.jsx)("span",{className:"text-primary-500 mt-1",children:"•"}),(0,t.jsx)("span",{children:e})]},a))})]})]})]})]}),(0,t.jsxs)(C.Zb,{className:"bg-gradient-to-br from-light-50 to-white border-light-200 shadow-sm mb-8",padding:"lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(v.Z,{className:"w-5 h-5 text-accent-600"}),(0,t.jsx)("h4",{className:"text-lg font-bold text-dark-800",children:"Contenido del Mensaje"})]}),(0,t.jsxs)("div",{className:"bg-white border-2 border-light-200 rounded-xl p-6 shadow-inner",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-secondary-500 w-12 h-1 rounded-full mb-4"}),(0,t.jsx)("p",{className:"text-dark-700 whitespace-pre-wrap leading-relaxed font-medium",children:e.content}),(0,t.jsx)("div",{className:"flex justify-end mt-4",children:(0,t.jsxs)("div",{className:"text-xs text-dark-400 bg-light-100 px-2 py-1 rounded",children:[e.content.length," caracteres"]})})]})]}),e.aiSuggestions.length>0&&(0,t.jsxs)(C.Zb,{className:"bg-gradient-to-br from-secondary-50 to-secondary-100/50 border-secondary-200 shadow-sm mb-8",padding:"lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(h.Z,{className:"w-5 h-5 text-secondary-600"}),(0,t.jsx)("h4",{className:"text-lg font-bold text-secondary-800",children:"Sugerencia de IA"})]}),(0,t.jsx)("div",{className:"bg-white/90 border border-secondary-200 rounded-xl p-6",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(i.Z,{className:"w-8 h-8 text-secondary-600 bg-secondary-100 p-2 rounded-lg"})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("p",{className:"text-secondary-800 whitespace-pre-wrap leading-relaxed font-medium",children:e.aiSuggestions[0]})})]})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 pt-6 border-t-2 border-light-200",children:["pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S.z,{onClick:()=>G(e.id),disabled:O===e.id+"-approve",className:"bg-gradient-to-r from-secondary-500 to-secondary-600 hover:from-secondary-600 hover:to-secondary-700 text-white px-6 py-3 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(Z,{size:18,className:"mr-2"}),O===e.id+"-approve"?"⏳ Aprobando...":"✅ Aprobar"]}),(0,t.jsxs)(S.z,{onClick:()=>K(e.id),disabled:O===e.id+"-reject",className:"bg-gradient-to-r from-danger-500 to-danger-600 hover:from-danger-600 hover:to-danger-700 text-white px-6 py-3 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(z,{size:18,className:"mr-2"}),O===e.id+"-reject"?"⏳ Rechazando...":"❌ Rechazar"]})]}),"approved"===e.status&&(0,t.jsxs)(S.z,{onClick:()=>Q(e.id),disabled:O===e.id+"-activate",className:"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white px-8 py-3 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(m.Z,{size:18,className:"mr-2"}),O===e.id+"-activate"?"⏳ Activando...":"\uD83D\uDE80 Activar con Twilio"]}),"active"===e.status&&(0,t.jsxs)("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-secondary-100 to-secondary-50 text-secondary-800 px-6 py-3 rounded-xl border border-secondary-200 shadow-sm",children:[(0,t.jsx)(A.Y,{icon:c.Z,size:20,className:"text-secondary-600",animation:"pulse"}),(0,t.jsx)("span",{className:"font-bold",children:"\uD83C\uDF89 Plantilla activa y lista para usar"})]}),"rejected"===e.status&&(0,t.jsxs)("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-danger-100 to-danger-50 text-danger-800 px-6 py-3 rounded-xl border border-danger-200 shadow-sm",children:[(0,t.jsx)(d.Z,{size:20,className:"text-danger-600"}),(0,t.jsx)("span",{className:"font-bold",children:"\uD83D\uDC94 Plantilla rechazada"})]})]})]})]},e.id)})})]})]})})}},3863:function(e,a,r){"use strict";r.d(a,{Y:function(){return l}});var t=r(7437),s=r(4508);let n={pulse:"animate-pulse-fast",spin:"animate-spin-slow",bounce:"animate-bounce-subtle",none:""};function l(e){let{icon:a,animation:r="none",className:l,size:i=24,...o}=e;return(0,t.jsx)(a,{size:i,className:(0,s.cn)("transition-all duration-300",n[r],l),...o})}},1252:function(e,a,r){"use strict";r.d(a,{z:function(){return d}});var t=r(7437),s=r(2265),n=r(535),l=r(4508);let i={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};function o(e){let{size:a="md",className:r}=e;return(0,t.jsx)("div",{className:(0,l.cn)("animate-spin",i[a],r),children:(0,t.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",className:"opacity-25"}),(0,t.jsx)("path",{d:"M12 2a10 10 0 0 1 10 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",className:"opacity-75"})]})})}let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98] btn-hover-lift",{variants:{variant:{primary:"bg-primary text-white hover:bg-primary-600 shadow-lg hover:shadow-xl active:shadow-md",secondary:"bg-secondary text-white hover:bg-secondary-600 shadow-lg hover:shadow-xl active:shadow-md",outline:"border-2 border-primary text-primary hover:bg-primary hover:text-white shadow-md hover:shadow-lg",ghost:"text-primary hover:bg-primary/10 hover:text-primary-700",danger:"bg-danger text-white hover:bg-danger-600 shadow-lg hover:shadow-xl active:shadow-md"},size:{sm:"h-9 px-3 text-xs",md:"h-10 px-4 py-2",lg:"h-11 px-6 text-base",xl:"h-12 px-8 text-lg"}},defaultVariants:{variant:"primary",size:"md"}}),d=(0,s.forwardRef)((e,a)=>{let{className:r,variant:s,size:n,loading:i,children:d,disabled:m,...x}=e;return(0,t.jsxs)("button",{className:(0,l.cn)(c({variant:s,size:n,className:r})),ref:a,disabled:m||i,...x,children:[i&&(0,t.jsx)(o,{size:"sm",className:"mr-2"}),d]})});d.displayName="Button"},6070:function(e,a,r){"use strict";r.d(a,{Zb:function(){return o}});var t=r(7437),s=r(2265),n=r(535),l=r(4508);let i=(0,n.j)("rounded-xl border bg-white text-gray-900 shadow-sm transition-all duration-300",{variants:{hover:{true:"card-hover cursor-pointer",false:""},padding:{none:"",sm:"p-3",md:"p-4",lg:"p-6",xl:"p-8"}},defaultVariants:{hover:!1,padding:"md"}}),o=(0,s.forwardRef)((e,a)=>{let{className:r,hover:s,padding:n,children:o,...c}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)(i({hover:s,padding:n,className:r})),...c,children:o})});o.displayName="Card",(0,s.forwardRef)((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5",r),...s})}).displayName="CardHeader",(0,s.forwardRef)((e,a)=>{let{className:r,children:s,...n}=e;return(0,t.jsx)("h3",{ref:a,className:(0,l.cn)("text-xl font-semibold leading-none tracking-tight",r),...n,children:s})}).displayName="CardTitle",(0,s.forwardRef)((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-gray-600",r),...s})}).displayName="CardDescription",(0,s.forwardRef)((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("pt-0",r),...s})}).displayName="CardContent",(0,s.forwardRef)((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center pt-0",r),...s})}).displayName="CardFooter"},6362:function(e,a,r){"use strict";r.d(a,{a:function(){return n}});var t=r(2265),s=r(9376);function n(){let[e,a]=(0,t.useState)({user:null,loading:!0,error:null}),r=(0,s.useRouter)(),n=(0,t.useCallback)(async()=>{try{let e=localStorage.getItem("token");if(!e)return a({user:null,loading:!1,error:null}),!1;let r=await fetch("".concat("http://localhost:3005","/api/auth/me"),{headers:{Authorization:"Bearer ".concat(e)},credentials:"include"});if(!r.ok)throw Error("Token inv\xe1lido");let t=await r.json();if(t.success)return a({user:t.user,loading:!1,error:null}),localStorage.setItem("user",JSON.stringify(t.user)),!0;throw Error(t.error||"Error de autenticaci\xf3n")}catch(e){return console.error("Error verificando autenticaci\xf3n:",e),localStorage.removeItem("token"),localStorage.removeItem("user"),a({user:null,loading:!1,error:e instanceof Error?e.message:"Error de autenticaci\xf3n"}),!1}},[]),l=async(e,r)=>{a(e=>({...e,loading:!0,error:null}));try{let t=await fetch("".concat("http://localhost:3005","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:r})}),s=await t.json();if(s.success)return localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(s.user)),a({user:s.user,loading:!1,error:null}),{success:!0};return a(e=>({...e,loading:!1,error:s.error||"Error al iniciar sesi\xf3n"})),{success:!1,error:s.error}}catch(r){let e="Error de conexi\xf3n. Por favor intente nuevamente.";return a(a=>({...a,loading:!1,error:e})),{success:!1,error:e}}},i=async(e,r,t)=>{a(e=>({...e,loading:!0,error:null}));try{let s=await fetch("".concat("http://localhost:3005","/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e,email:r,password:t})}),n=await s.json();if(n.success)return localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user)),a({user:n.user,loading:!1,error:null}),{success:!0};return a(e=>({...e,loading:!1,error:n.error||"Error al registrar usuario"})),{success:!1,error:n.error}}catch(r){let e="Error de conexi\xf3n. Por favor intente nuevamente.";return a(a=>({...a,loading:!1,error:e})),{success:!1,error:e}}},o=(0,t.useCallback)(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a({user:null,loading:!1,error:null}),r.push("/login")},[r]);return(0,t.useEffect)(()=>{n()},[n]),(0,t.useEffect)(()=>{if(e.user){let e=setInterval(()=>{n()},3e5);return()=>clearInterval(e)}},[e.user,n]),{user:e.user,loading:e.loading,error:e.error,isAuthenticated:!!e.user,login:l,register:i,logout:o,checkAuth:n}}},8530:function(e,a,r){"use strict";r.d(a,{T:function(){return t}});let t="http://localhost:3005"},4508:function(e,a,r){"use strict";r.d(a,{cn:function(){return n}});var t=r(1994),s=r(3335);function n(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,s.m6)((0,t.W)(a))}},2222:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},1047:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},875:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2135:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},1671:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9388:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1723:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},8736:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},3417:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},3276:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},7168:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3247:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8906:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},2023:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},6865:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2369:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9376:function(e,a,r){"use strict";var t=r(5475);r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[14,971,117,744],function(){return e(e.s=4070)}),_N_E=e.O()}]);